(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const v=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},c=e=>{try{return JSON.parse(localStorage.getItem(e))}catch{return null}},d=e=>localStorage.removeItem(e);function u(){d("token"),d("profile")}const s="https://api.noroff.dev/api/v1/auction",m=`${s}/listings`,w=`${s}/auth/register`,B=`${s}/auth/login`,k=`${s}/profiles`,g=e=>{const t=c("token"),o={};return e&&(o["Content-Type"]=e),t&&(o.Authorization=`Bearer ${t}`),o},f=document.getElementById("listingsContainer");function l(e){f.innerHTML="",e&&e.forEach(t=>f.innerHTML+=`<a href="/src/html/listing.html?id=${t.id}">
        <img src="${t.media}"/>
        <p>${t.title}</p>
        <p>Ends at ${t.endsAt}</p>
        </a>`)}function p(e){const t=document.getElementById("search");t.onkeyup=function(o){const i=o.target.value.trim().toLowerCase(),n=e.filter(r=>{if(r.title.toLowerCase().includes(i)||r.tags.toString().toLowerCase().includes(i))return!0});l(n)}}function h(e){const t=document.getElementById("filterRecent");t.onclick=function(){const o=new Date(new Date().setDate(new Date().getDate()-2)).toISOString(),i=e.filter(n=>n.created>=o);console.log(i),l(i)}}function y(e){const t=document.getElementById("filterPopular");t.onclick=function(){const o=e.filter(i=>i._count.bids>=10);console.log(o),l(o)}}async function I(){try{const e={method:"GET",headers:g("application/json"),body:JSON.stringify()},t=await fetch(`${m}?_active=true`,e);if(t.ok){const o=await t.json();l(o),p(o),h(o),y(o)}else alert("oops! something went wrong!")}catch(e){console.log(e)}}async function L(){document.getElementById("home").addEventListener("click",e=>{e.preventDefault();const t=c("profile");window.location=`/index.html?name=${t.name}`}),document.getElementById("registerBtn").addEventListener("click",e=>{e.preventDefault(),window.location="/src/html/register.html"}),document.getElementById("loginBtn").addEventListener("click",e=>{e.preventDefault(),window.location="/src/html/login.html"}),document.getElementById("createBtn").addEventListener("click",e=>{e.preventDefault();const t=c("profile");window.location=`/src/html/createListing.html?name=${t.name}`}),document.getElementById("profile").addEventListener("click",e=>{e.preventDefault();const t=c("profile");window.location=`/src/html/profile.html?name=${t.name}`}),document.getElementById("logoutBtn").addEventListener("click",e=>{e.preventDefault(),u(),location.href="/"})}async function E(){I()}L();E();listing();export{m as A,B as a,k as b,w as c,g as h,c as l,v as s};
